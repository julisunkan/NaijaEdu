{% extends "base_new.html" %}

{% block title %}Admin Dashboard - LearnNG{% endblock %}

{% block content %}
<!-- Admin Dashboard Header -->
<section class="hero">
    <div class="container">
        <div class="row align-items-center">
            <div class="col-lg-8">
                <h1 class="display-5 fw-bold mb-3">Admin Dashboard</h1>
                <p class="lead mb-4 opacity-90">
                    Manage your e-learning platform, monitor performance, and oversee all activities from this central hub.
                </p>
                <div class="d-flex align-items-center text-white-50">
                    <div class="me-4">
                        <i data-feather="users" class="me-2"></i>
                        <strong>{{ stats.total_users }}</strong> Users
                    </div>
                    <div class="me-4">
                        <i data-feather="book" class="me-2"></i>
                        <strong>{{ stats.total_courses }}</strong> Courses
                    </div>
                    <div>
                        <i data-feather="dollar-sign" class="me-2"></i>
                        <strong>{{ stats.total_revenue|currency }}</strong> Revenue
                    </div>
                </div>
            </div>
            <div class="col-lg-4 text-center">
                <div class="position-relative">
                    <!-- Admin Dashboard Illustration -->
                    <svg width="300" height="250" viewBox="0 0 300 250" fill="none" xmlns="http://www.w3.org/2000/svg" class="img-fluid">
                        <!-- Dashboard Screen -->
                        <rect x="50" y="50" width="200" height="150" rx="15" fill="white" opacity="0.95"/>
                        <rect x="65" y="65" width="170" height="25" rx="5" fill="#f1f5f9"/>
                        <rect x="65" y="100" width="80" height="40" rx="8" fill="#3b82f6"/>
                        <rect x="155" y="100" width="80" height="40" rx="8" fill="#10b981"/>
                        <rect x="65" y="150" width="170" height="8" rx="4" fill="#e2e8f0"/>
                        <rect x="65" y="170" width="120" height="8" rx="4" fill="#e2e8f0"/>
                        
                        <!-- Charts -->
                        <circle cx="100" cy="120" r="15" fill="white"/>
                        <path d="M90 120 L105 110 L110 125" stroke="#3b82f6" stroke-width="2" fill="none"/>
                        
                        <circle cx="190" cy="120" r="15" fill="white"/>
                        <rect x="185" y="115" width="10" height="10" fill="#10b981"/>
                        
                        <!-- Admin figure -->
                        <circle cx="150" cy="30" r="15" fill="#fbbf24"/>
                        <rect x="140" y="45" width="20" height="25" rx="10" fill="#1f2937"/>
                        
                        <!-- Floating elements -->
                        <circle cx="30" cy="80" r="8" fill="rgba(255,255,255,0.3)"/>
                        <circle cx="270" cy="180" r="10" fill="rgba(255,255,255,0.3)"/>
                        <rect x="20" y="200" width="15" height="15" rx="3" fill="rgba(255,255,255,0.2)"/>
                    </svg>
                </div>
            </div>
        </div>
    </div>
</section>

<!-- Quick Stats Cards -->
<section class="py-5 bg-light-gradient">
    <div class="container">
        <div class="row g-4">
            <div class="col-lg-3 col-md-6">
                <div class="card border-0 shadow-sm h-100">
                    <div class="card-body text-center">
                        <div class="feature-icon mb-3 bg-primary">
                            <i data-feather="users" style="width: 1.5rem; height: 1.5rem;"></i>
                        </div>
                        <h3 class="fw-bold">{{ stats.total_users }}</h3>
                        <p class="text-muted mb-0">Total Users</p>
                        <small class="text-success">
                            <i data-feather="trending-up" style="width: 0.875rem; height: 0.875rem;"></i>
                            +12% this month
                        </small>
                    </div>
                </div>
            </div>
            
            <div class="col-lg-3 col-md-6">
                <div class="card border-0 shadow-sm h-100">
                    <div class="card-body text-center">
                        <div class="feature-icon mb-3 bg-success">
                            <i data-feather="book" style="width: 1.5rem; height: 1.5rem;"></i>
                        </div>
                        <h3 class="fw-bold">{{ stats.total_courses }}</h3>
                        <p class="text-muted mb-0">Total Courses</p>
                        <small class="text-success">
                            <i data-feather="plus" style="width: 0.875rem; height: 0.875rem;"></i>
                            5 new this week
                        </small>
                    </div>
                </div>
            </div>
            
            <div class="col-lg-3 col-md-6">
                <div class="card border-0 shadow-sm h-100">
                    <div class="card-body text-center">
                        <div class="feature-icon mb-3 bg-warning">
                            <i data-feather="dollar-sign" style="width: 1.5rem; height: 1.5rem;"></i>
                        </div>
                        <h3 class="fw-bold">{{ stats.total_revenue|currency }}</h3>
                        <p class="text-muted mb-0">Total Revenue</p>
                        <small class="text-success">
                            <i data-feather="trending-up" style="width: 0.875rem; height: 0.875rem;"></i>
                            +8% this month
                        </small>
                    </div>
                </div>
            </div>
            
            <div class="col-lg-3 col-md-6">
                <div class="card border-0 shadow-sm h-100">
                    <div class="card-body text-center">
                        <div class="feature-icon mb-3 bg-danger">
                            <i data-feather="alert-circle" style="width: 1.5rem; height: 1.5rem;"></i>
                        </div>
                        <h3 class="fw-bold">{{ stats.pending_payments }}</h3>
                        <p class="text-muted mb-0">Pending Payments</p>
                        <small class="text-warning">
                            <i data-feather="clock" style="width: 0.875rem; height: 0.875rem;"></i>
                            Needs attention
                        </small>
                    </div>
                </div>
            </div>
        </div>
    </div>
</section>

<!-- Admin Navigation & Tools -->
<section class="py-5">
    <div class="container">
        <div class="row g-4">
            <!-- Left Column - Main Actions -->
            <div class="col-lg-8">
                <div class="card border-0 shadow-sm">
                    <div class="card-header bg-white border-0">
                        <h5 class="fw-bold mb-0">
                            <i data-feather="settings" class="me-2 text-primary"></i>
                            Admin Tools
                        </h5>
                    </div>
                    <div class="card-body">
                        <div class="row g-3">
                            <!-- User Management -->
                            <div class="col-md-6">
                                <div class="card border h-100">
                                    <div class="card-body p-3">
                                        <div class="d-flex align-items-center mb-3">
                                            <div class="feature-icon me-3 bg-primary" style="width: 2.5rem; height: 2.5rem;">
                                                <i data-feather="users" style="width: 1.25rem; height: 1.25rem;"></i>
                                            </div>
                                            <div>
                                                <h6 class="fw-semibold mb-0">User Management</h6>
                                                <small class="text-muted">Manage all users</small>
                                            </div>
                                        </div>
                                        <div class="d-grid gap-2">
                                            <a href="{{ url_for('manage_users') }}" class="btn btn-outline-primary btn-sm">
                                                <i data-feather="list" class="me-2"></i>View Users
                                            </a>
                                            <a href="{{ url_for('edit_user', user_id=1) }}" class="btn btn-outline-secondary btn-sm">
                                                <i data-feather="edit" class="me-2"></i>Edit User
                                            </a>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            
                            <!-- Course Management -->
                            <div class="col-md-6">
                                <div class="card border h-100">
                                    <div class="card-body p-3">
                                        <div class="d-flex align-items-center mb-3">
                                            <div class="feature-icon me-3 bg-success" style="width: 2.5rem; height: 2.5rem;">
                                                <i data-feather="book" style="width: 1.25rem; height: 1.25rem;"></i>
                                            </div>
                                            <div>
                                                <h6 class="fw-semibold mb-0">Course Management</h6>
                                                <small class="text-muted">Manage all courses</small>
                                            </div>
                                        </div>
                                        <div class="d-grid gap-2">
                                            <a href="{{ url_for('admin_courses') }}" class="btn btn-outline-success btn-sm">
                                                <i data-feather="list" class="me-2"></i>View Courses
                                            </a>
                                            <a href="{{ url_for('create_course') }}" class="btn btn-outline-secondary btn-sm">
                                                <i data-feather="plus" class="me-2"></i>Add Course
                                            </a>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            
                            <!-- Payment Management -->
                            <div class="col-md-6">
                                <div class="card border h-100">
                                    <div class="card-body p-3">
                                        <div class="d-flex align-items-center mb-3">
                                            <div class="feature-icon me-3 bg-warning" style="width: 2.5rem; height: 2.5rem;">
                                                <i data-feather="credit-card" style="width: 1.25rem; height: 1.25rem;"></i>
                                            </div>
                                            <div>
                                                <h6 class="fw-semibold mb-0">Payment Management</h6>
                                                <small class="text-muted">Handle payments</small>
                                            </div>
                                        </div>
                                        <div class="d-grid gap-2">
                                            <a href="{{ url_for('manage_payments') }}" class="btn btn-outline-warning btn-sm">
                                                <i data-feather="list" class="me-2"></i>View Payments
                                            </a>
                                            <a href="{{ url_for('admin_withdrawals') }}" class="btn btn-outline-secondary btn-sm">
                                                <i data-feather="download" class="me-2"></i>Withdrawals
                                            </a>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            
                            <!-- System Settings -->
                            <div class="col-md-6">
                                <div class="card border h-100">
                                    <div class="card-body p-3">
                                        <div class="d-flex align-items-center mb-3">
                                            <div class="feature-icon me-3 bg-info" style="width: 2.5rem; height: 2.5rem;">
                                                <i data-feather="settings" style="width: 1.25rem; height: 1.25rem;"></i>
                                            </div>
                                            <div>
                                                <h6 class="fw-semibold mb-0">System Settings</h6>
                                                <small class="text-muted">Configure platform</small>
                                            </div>
                                        </div>
                                        <div class="d-grid gap-2">
                                            <a href="{{ url_for('admin_settings') }}" class="btn btn-outline-info btn-sm">
                                                <i data-feather="sliders" class="me-2"></i>Settings
                                            </a>
                                            <a href="{{ url_for('certificate_templates') }}" class="btn btn-outline-secondary btn-sm">
                                                <i data-feather="award" class="me-2"></i>Certificates
                                            </a>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Right Column - Quick Stats & Recent Activity -->
            <div class="col-lg-4">
                <!-- Recent Activity -->
                <div class="card border-0 shadow-sm mb-4">
                    <div class="card-header bg-white border-0">
                        <h6 class="fw-bold mb-0">Recent Activity</h6>
                    </div>
                    <div class="card-body">
                        <div class="list-group list-group-flush">
                            <div class="list-group-item border-0 px-0">
                                <div class="d-flex align-items-center">
                                    <div class="feature-icon me-3 bg-success" style="width: 2rem; height: 2rem;">
                                        <i data-feather="user-plus" style="width: 1rem; height: 1rem;"></i>
                                    </div>
                                    <div class="flex-grow-1">
                                        <div class="fw-semibold small">New User Registration</div>
                                        <small class="text-muted">John Doe joined</small>
                                    </div>
                                    <small class="text-muted">2h ago</small>
                                </div>
                            </div>
                            <div class="list-group-item border-0 px-0">
                                <div class="d-flex align-items-center">
                                    <div class="feature-icon me-3 bg-primary" style="width: 2rem; height: 2rem;">
                                        <i data-feather="book" style="width: 1rem; height: 1rem;"></i>
                                    </div>
                                    <div class="flex-grow-1">
                                        <div class="fw-semibold small">Course Created</div>
                                        <small class="text-muted">Python Basics</small>
                                    </div>
                                    <small class="text-muted">4h ago</small>
                                </div>
                            </div>
                            <div class="list-group-item border-0 px-0">
                                <div class="d-flex align-items-center">
                                    <div class="feature-icon me-3 bg-warning" style="width: 2rem; height: 2rem;">
                                        <i data-feather="credit-card" style="width: 1rem; height: 1rem;"></i>
                                    </div>
                                    <div class="flex-grow-1">
                                        <div class="fw-semibold small">Payment Received</div>
                                        <small class="text-muted">â‚¦25,000</small>
                                    </div>
                                    <small class="text-muted">6h ago</small>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Quick Actions -->
                <div class="card border-0 shadow-sm">
                    <div class="card-header bg-white border-0">
                        <h6 class="fw-bold mb-0">Quick Actions</h6>
                    </div>
                    <div class="card-body">
                        <div class="d-grid gap-2">
                            <a href="{{ url_for('bulk_import') }}" class="btn btn-outline-primary btn-sm">
                                <i data-feather="upload" class="me-2"></i>
                                Bulk Import
                            </a>
                            <a href="{{ url_for('bulk_export') }}" class="btn btn-outline-success btn-sm">
                                <i data-feather="download" class="me-2"></i>
                                Export Data
                            </a>
                            <a href="{{ url_for('create_voucher') }}" class="btn btn-outline-warning btn-sm">
                                <i data-feather="tag" class="me-2"></i>
                                Create Voucher
                            </a>
                            <a href="{{ url_for('admin_settings') }}" class="btn btn-outline-secondary btn-sm">
                                <i data-feather="settings" class="me-2"></i>
                                System Settings
                            </a>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</section>
{% endblock %}

{% block scripts %}
<script>
    document.addEventListener('DOMContentLoaded', function() {
        // Initialize tooltips
        const tooltipTriggerList = [].slice.call(document.querySelectorAll('[data-bs-toggle="tooltip"]'));
        const tooltipList = tooltipTriggerList.map(function (tooltipTriggerEl) {
            return new bootstrap.Tooltip(tooltipTriggerEl);
        });

        // Initialize feather icons
        feather.replace();
    });
</script>
{% endblock %}